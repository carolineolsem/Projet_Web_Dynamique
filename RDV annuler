<?php
// Connexion à la base de données
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "Sportify";

$conn = new mysqli($servername, $username, $password, $dbname);

// Vérifier la connexion
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Vérifier si l'ID du rendez-vous est fourni
if ($_SERVER["REQUEST_METHOD"] == "POST" && isset($_POST['rdv_id'])) {
    $rdv_id = $_POST['rdv_id'];

    // Mettre à jour le statut du rendez-vous à "annulé"
    $sql = "UPDATE rendez_vous SET statut = 'annulé' WHERE id = $rdv_id";

    if ($conn->query($sql) === TRUE) {
        echo "Rendez-vous annulé avec succès.";
    } else {
        echo "Erreur lors de l'annulation du rendez-vous: " . $conn->error;
    }
}

$conn->close();

// Rediriger vers la page des rendez-vous confirmés
header("Location: rendez_vous_confirmes.php");
exit;
?>
